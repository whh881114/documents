# 安装jenkins

## 参考资料
- https://support.huaweicloud.com/bestpractice-cce/cce_bestpractice_0066.html

## 架构选型

| 部署模式         | Master     | Agent     | 优缺点分析                                                                                                                         |
|:-------------|:-----------|:----------|:------------------------------------------------------------------------------------------------------------------------------|
| 单Master      | 虚拟机        | -         | 优点：本地化构建，操作简单。<br>缺点：任务管理和执行都在同一台虚拟机上，安全风险较高。                                                                                 |
| 单Master      | 容器         | -         | 优点：利用K8s容器调度机制，拥有一定的自愈能力。<br>缺点：任务管理和执行没有分离，安全风险问题仍未解决。                                                                       |
| Master加Agent | 虚拟机        | 虚拟机       | 优点：任务管理和执行分离，降低了一定的安全风险。<br>缺点：只能固定Agent，无法进行资源调度，资源利用率低，且环境维护成本高。                                                            |
| Master加Agent | 虚拟机        | 容器（K8s集群） | 优点：容器化的Agent可以选择固定Agent，也可以通过K8s实现动态Agent，动态Agent的方式资源利用率高。并且可以根据调度策略均匀分配任务，后期也比较容易维护。<br>缺点：Jenkins的Master存在小概率的宕机风险，恢复成本较高。 |
| Master加Agent | 容器（K8s集群）  | 容器（K8s集群） | 优点：容器化的Agent可以选择固定Agent，也可以通过K8s实现动态Agent，资源利用率高。且Master具有自愈能力，维护成本低。Agent可以选择和Master共集群，也可以分集群。<br>缺点：系统复杂程度高，环境搭建较困难。       |
