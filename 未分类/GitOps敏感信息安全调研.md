# GitOps敏感信息安全调研


## 存放安全
- 方案一：单独一个仓库，如`argocd-manifests-secrets`，存放明文版的`secrets`文件，控制好仓库权限。这种方式最简单，但是怕泄露。
- 方案二：使用`sops`加密本地文件，提交到特定仓库，然后使用`argocd-cmp`自定义插件实现文件解密。这种方式比较复杂，但是不怕泄露。


## 运行时安全
- 如果是环境变量引用密码，那么只要能进入`pod`就可以看到密码。
- 如果密码存放在`ConfigMap`或者`Secret`中，那么只要能登录到`KubernetesDashboard`就有可能获取到原始文件，然后使用`base64`解密。
- 所以针对以上情况来说，要控制的是用户访问权限，如配置`rbac`。


## 结论
- 个人倾向于方案一，足够简单。